(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{"0bda":function(t,e,a){},1519:function(t,e,a){"use strict";var c=a("0bda"),s=a.n(c);s.a},"680b":function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart"},[a("p",{staticClass:"tile bold"},[t._v("全部商品")]),a("table",[a("thead",[a("tr",[a("th",{staticClass:"t1 al"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelect,expression:"allSelect"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allSelect)?t._i(t.allSelect,null)>-1:t.allSelect},on:{change:function(e){var a=t.allSelect,c=e.target,s=!!c.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);c.checked?i<0&&(t.allSelect=a.concat([n])):i>-1&&(t.allSelect=a.slice(0,i).concat(a.slice(i+1)))}else t.allSelect=s}}}),t._v("全选")]),a("th",{staticClass:"t2"},[t._v("商品信息")]),a("th",{staticClass:"t3"},[t._v("规格")]),a("th",{staticClass:"t4"},[t._v("单价")]),a("th",{staticClass:"t5"},[t._v("数量")]),a("th",{staticClass:"t6"},[t._v("合计")]),a("th",{staticClass:"t7"},[t._v("操作")])])])]),a("table",[a("tbody",t._l(t.cart,function(e,c){return a("tr",{class:{selected:e.selected}},[a("td",{staticClass:"t1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"i.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{change:function(a){var c=e.selected,s=a.target,n=!!s.checked;if(Array.isArray(c)){var i=null,l=t._i(c,i);s.checked?l<0&&t.$set(e,"selected",c.concat([i])):l>-1&&t.$set(e,"selected",c.slice(0,l).concat(c.slice(l+1)))}else t.$set(e,"selected",n)}}}),a("img",{attrs:{src:t._f("img")(e.default_img),alt:""}})]),a("td",{staticClass:"t2"},[t._v(t._s(e.product_name))]),a("td",{staticClass:"t3 sm-font ac"},[t._v(t._s(e.product_code))]),a("td",{staticClass:"t4 sm-font ac"},[t._v(t._s(t._f("exch")(e,t.ex))+t._s(t.ex.unit))]),a("td",{staticClass:"t5 ac"},[a("a",{staticClass:"btn ac",on:{click:function(a){t.changeNums(-1,e)}}},[t._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.nums,expression:"i.nums",modifiers:{number:!0}}],staticClass:"ac",attrs:{type:"number"},domProps:{value:e.nums},on:{blur:[function(a){t.checkNums(e.nums,c)},function(e){t.$forceUpdate()}],input:function(a){a.target.composing||t.$set(e,"nums",t._n(a.target.value))}}}),a("a",{staticClass:"btn ac",on:{click:function(a){t.changeNums(1,e)}}},[t._v("+")])]),a("td",{staticClass:"t6 ac lager-font bold",staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(100*t._f("exch")(e,t.ex)*e.nums/100)+"  "),a("span",{staticStyle:{"font-size":"14px",color:"black"}},[t._v(t._s(t.ex.unit))])]),a("td",{staticClass:"t7 sm-font ac"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("a",{on:{click:function(a){t.addCollect(e.product_id)}}},[t._v("移入收藏夹")])]),a("div",[a("a",{on:{click:function(a){t.delCart(e.product_id,!0)}}},[t._v("删除")])])])])}))])])},s=[],n=a("be94"),i=(a("f751"),a("ac6a"),a("cadf"),a("551c"),a("097d"),a("2f62")),l={showRecommend:!1,nav:"hidden",header:"fault"},o={name:"cart",metaInfo:{title:"购物车",meta:[{name:"keywords",content:"福分通"},{name:"description",content:"专注企业员工福利"}]},data:function(){return{cart:[],ex:{exchange:"",unit:""}}},watch:{cart:{handler:function(t,e){var a=[];this.cart.forEach(function(t,e){if(t.selected)a.push(t);else{if(0===a.length)return;a.forEach(function(e,c){t.selected===e.selected&&a.splice(c,e)})}}),this.$store.dispatch("CART/SET_SHOPPING_CART",a)},deep:!0}},created:function(){this.$store.dispatch("layout/Change",l),this.bus.$emit("main-page-layout",!1,!1,!0),this.getShoppingCart()},destroyed:function(){this.bus.$emit("main-page-layout",!0,!0,!1)},mounted:function(){this.bus.$on("SelectAll",function(t){this.selectALL(t)}.bind(this))},methods:{getShoppingCart:function(){var t=this;this.cart=[],this.yum("api/member/shoppingCart").then(function(e){200===e.data.status&&(t.ex.exchange=parseInt(e.data.exchange),t.ex.unit=e.data.unit,e.data.data.forEach(function(e,a){var c=Object.assign({selected:!1},e);t.cart.push(c)}),t.$store.dispatch("CART/setCartLength",t.cart.length))})},changeNums:function(t,e){e.nums<2&&t<0?e.nums=1:e.nums=parseInt(e.nums)+t>100?100:parseInt(e.nums)+t},delCart:function(t,e){var a=this,c={product_id:[]};e?c.product_id.push(t):this.cart.forEach(function(t,e){t.selected&&c.product_id.push(t.product_id)}),this.yum("api/member/delCart",c).then(function(t){200===t.data.status&&(a.bus.$emit("notice",t.data.msg),a.bus.$emit("topNav"),a.getShoppingCart())})},selectALL:function(t){t?this.cart.forEach(function(t,e){t.selected=!0}):this.cart.forEach(function(t,e){t.selected=!1})},addCollect:function(t){var e=this;this.yum("api/member/collect",{product_id:t}).then(function(t){e.bus.$emit("notice",t.data.msg)})},checkNums:function(t,e){this.cart[e].nums=(t>100?100:t)&&(t<1?1:t)}},computed:Object(n["a"])({},Object(i["b"])("CART",["shopping_cart","cart_length"]),{allSelect:{get:function(){return this.cart.length===this.shopping_cart.length},set:function(t){this.selectALL(t)}}})},r=o,u=(a("1519"),a("2877")),d=Object(u["a"])(r,c,s,!1,null,"6932bd47",null);d.options.__file="cart.vue";e["default"]=d.exports}}]);
//# sourceMappingURL=42.c0fad9bc.js.map