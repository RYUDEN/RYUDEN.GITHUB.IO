(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"0241":function(t,e,a){"use strict";var i=a("6b1a"),n=a.n(i);n.a},"1b7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAANCAYAAACZ3F9/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE5QzMwNDQ1RDVBRDExRThCQTA4QjI2MzQxMjBFOEQ2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE5QzMwNDQ2RDVBRDExRThCQTA4QjI2MzQxMjBFOEQ2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTlDMzA0NDNENUFEMTFFOEJBMDhCMjYzNDEyMEU4RDYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTlDMzA0NDRENUFEMTFFOEJBMDhCMjYzNDEyMEU4RDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7cNQtvAAAAvUlEQVR42mL6//8/A0mYobweiDmZGEgBjBX1QLIBiEWYyNAEAqJMZGgCASEmMjQxEHYqdk0EnIpbEwgIM5GsyUaBgeF4VjQTXk0eagwMHCwIOUs5BoY1MQwMU48/ZcJrU7QhA8O6WAYGNmYGBlMZBoaN8QwMCasYGJac/80ISg04nccMNHdFJAODICcDg64EA0PSGgaGrTdAMueY8Prp7z+grSsYGN58Y2DIWA/TBAJijKC0hyf0cIHvAAEGALmaV1SaNd89AAAAAElFTkSuQmCC"},"6b1a":function(t,e,a){},fd20:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pay-table"},[i("div",{staticClass:"goods"},[i("p",{staticClass:"bold tile"},[t._v("订单信息")]),i("table",[t._m(0),t._l(t.order,function(e,a){return i("tr",{key:a},[i("td",{staticStyle:{padding:"10px 20px"}},[i("img",{staticStyle:{width:"60px",height:"60px","margin-right":"10px"},attrs:{src:t._f("img")(e.default_img),alt:""}}),t._v(t._s(e.product_name))]),i("td",{staticClass:"ac"},[t._v(t._s(e.goods_point/t.exch)+t._s(t.unit))]),i("td",{staticClass:"ac"},[t._v(t._s(e.nums))]),i("td",{staticClass:"ac"},[t._v(t._s(e.shouhuo_name))])])}),i("tr",[i("td",{staticClass:"ar",staticStyle:{"padding-right":"10px"},attrs:{colspan:"4"}},[t._v("\n                    运费："),i("span",{staticStyle:{"font-size":"16px","font-weight":"bold",color:"#ff0077"}},[t._v(t._s(t.expressFee/t.exch))]),t._v(t._s(t.unit)+"\n                    合计："),i("span",{staticStyle:{"font-size":"16px","font-weight":"bold",color:"#ff0077"}},[t._v(t._s(t.subTotal/t.exch))]),t._v(t._s(t.unit)+"\n                ")])])],2)]),i("div",{staticClass:"payment"},[i("p",{staticClass:"bold tile"},[t._v("支付方式")]),i("div",{staticClass:"choose-payment"},[i("p",{staticStyle:{"padding-left":"20px","margin-bottom":"30px"}},[t._v("您当前账户余额："+t._s(t.point/t.exch)+t._s(t.unit)),t.subTotal>t.point?i("span",[t._v("，不足以抵扣。差额"),i("em",{staticStyle:{color:"#f00070"}},[t._v(t._s((t.subTotal-t.point)/t.exch)+t._s(t.unit))]),t._v("可使用以下方式支付 。")]):t._e()]),t.Dikou?i("ul",[i("li",{staticClass:"mixed-payment"},[i("span",[t._v("是否启用混合支付")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Dikou,expression:"Dikou"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.Dikou)?t._i(t.Dikou,null)>-1:t.Dikou},on:{change:function(e){var a=t.Dikou,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=null,s=t._i(a,o);i.checked?s<0&&(t.Dikou=a.concat([o])):s>-1&&(t.Dikou=a.slice(0,s).concat(a.slice(s+1)))}else t.Dikou=n}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.dikoujifen,expression:"dikoujifen"}],attrs:{type:"text",placeholder:"需要抵扣的积分数量"},domProps:{value:t.dikoujifen},on:{input:function(e){e.target.composing||(t.dikoujifen=e.target.value)}}})]),t._l(t.payment,function(e,n){return"JifenPay"!==e.type?i("li",{key:n,class:["pay-list","ac","cursor",{"selected-pay":t.DefaultPayment===e.type}],on:{click:function(a){t.DefaultPayment=e.type}}},[t._v("\n                    "+t._s(e.title)+"\n                    "),i("img",{directives:[{name:"show",rawName:"v-show",value:t.DefaultPayment===e.type,expression:"DefaultPayment===i.type"}],attrs:{src:a("1b7b"),alt:""}})]):t._e()})],2):i("ul",t._l(t.payment,function(e,n){return e.allow?i("li",{key:n,class:["pay-list","ac","cursor",{"selected-pay":t.DefaultPayment===e.type}],on:{click:function(a){t.DefaultPayment=e.type}}},[t._v("\n                    "+t._s(e.title)+"\n                    "),i("img",{directives:[{name:"show",rawName:"v-show",value:t.DefaultPayment===e.type,expression:"DefaultPayment===i.type"}],attrs:{src:a("1b7b"),alt:""}})]):t._e()}))])]),i("div",{staticClass:"pay-btn ac cursor",on:{click:t.pay}},[t._v("\n        立即支付\n    ")])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"tile"},[a("td",{staticClass:"ac"},[t._v("商品信息")]),a("td",{staticClass:"ac"},[t._v("单价")]),a("td",{staticClass:"ac"},[t._v("数量")]),a("td",{staticClass:"ac"},[t._v("收货人")])])}],o=(a("28a5"),a("ac6a"),a("cadf"),a("551c"),a("097d"),{showRecommend:!1,nav:"hidden",header:"fault"}),s={name:"pay-table",metaInfo:{title:"支付",meta:[{name:"keywords",content:"福分通"},{name:"description",content:"专注企业员工福利"}]},created:function(){this.$store.dispatch("layout/Change",o),this.getMemberInfo(),this.getOrderInfo()},mounted:function(){},beforeDestroy:function(){window.onpopstate=null},data:function(){return{dikoujifen:"",DefaultPayment:"JifenPay",isDikou:!1,payment:[{title:"余额支付",type:"JifenPay",allow:!0},{title:"支付宝",type:"AliPay",allow:!0},{title:"微信支付",type:"WeChatPay",allow:!0}],order:[],point:this.storage.getStorage("fft-user-info").point,exch:"1",unit:"",total:0,expressFee:0}},methods:{getMemberInfo:function(){var t=this;this.yum("api/member/getMemberInfo").then(function(e){200===e.data.status&&(t.point=e.data.data.point,t.exch=parseInt(e.data.exchange),t.unit=e.data.unit)})},getOrderInfo:function(){var t=this,e=this.$route.query.order_sn||null;"string"===typeof this.$route.query.order_sn&&(e=[this.$route.query.order_sn]),this.yum("api/order/getOrderDetail",{order_sn:e}).then(function(e){if(200===e.data.status){var a=[],i=0,n=0;e.data.data.forEach(function(t){a=a.concat(t.goods_child),i+=t.subtotal,n+=t.express_fee}),t.order=a,t.total=i,t.expressFee=n,t.total+t.expressFee>parseInt(t.point)&&(t.payment[0].allow=!1,t.DefaultPayment="AliPay")}else t.$router.push("/cart")})},pay:function(){var t=this.DefaultPayment,e=this.$route.query.order_sn,a=this.storage.getStorage("FFT").token,i=this.storage.getStorage("FFT").business_code,n=location.hostname.split(".")[0];n="mapi","WeChatPay"===this.DefaultPayment?(this.bus.$emit("loading","即将跳转到第三方支付"),setTimeout(function(){location.href="http://".concat(n,".fufentong.com/").concat(i,"/api/order/pay?payType=").concat(t,"&orderSn[]=").concat(e,"&token=").concat(a,"&wx=2")},1e3)):"AliPay"===this.DefaultPayment?(this.bus.$emit("loading","即将跳转到第三方支付"),setTimeout(function(){location.href="http://".concat(n,".fufentong.com/").concat(i,"/api/order/pay?payType=").concat(t,"&orderSn[]=").concat(e,"&token=").concat(a,"&ali=1")},1e3)):(this.bus.$emit("loading","即将跳转到积分支付"),setTimeout(function(){location.href="http://".concat(n,".fufentong.com/").concat(i,"/api/order/pay?payType=").concat(t,"&orderSn[]=").concat(e,"&token=").concat(a,"&jifen=1")},1e3))}},computed:{Dikou:{get:function(){return this.isDikou},set:function(t){this.isDikou=t,t&&(this.DefaultPayment="AliPay")}},subTotal:function(){return this.total+this.expressFee}}},c=s,l=(a("0241"),a("2877")),r=Object(l["a"])(c,i,n,!1,null,"05318e1e",null);r.options.__file="pay-table.vue";e["default"]=r.exports}}]);
//# sourceMappingURL=36.268af7c5.js.map