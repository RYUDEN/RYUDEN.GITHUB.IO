(function(e){function t(t){for(var n,o,r=t[0],u=t[1],c=t[2],p=0,d=[];p<r.length;p++)o=r[p],i[o]&&d.push(i[o][0]),i[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,r=1;r<s.length;r++){var u=s[r];0!==i[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},i={13:0},a=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var l=u;a.push([10,1,0]),s()})({10:function(e,t,s){e.exports=s("9424")},"5a69":function(e,t,s){"use strict";var n=s("9450"),i=s.n(n);i.a},9424:function(e,t,s){"use strict";s.r(t);var n=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("top-title",{attrs:{type:!0}}),s("f-alert"),s("div",{staticClass:"login-bg",style:{backgroundImage:"url('/static/user/bg2.jpg')"}},[s("div",{staticClass:"login-box"},[e._m(0),s("div",{staticClass:"box-form"},[s("div",{staticClass:"user form-item"},[s("label",{attrs:{for:"user-id"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{id:"user-id",type:"text",name:"用户名",placeholder:"请输入手机号码/用户名"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e.business_list.length>1?s("div",{staticClass:"form-item check-business"},[s("div",{staticClass:"business-che",on:{click:function(t){e.show_business_list=!e.show_business_list}}},[e._v("\n                        "+e._s(e.select_business.business_name?e.select_business.business_name:"请选择需要登录的子站")+"\n                        "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.select_business.business_name,expression:"select_business.business_name"}],attrs:{id:"business-code",type:"hidden",name:"business-code",placeholder:"请选择需要登录的子站"},domProps:{value:e.select_business.business_name},on:{input:function(t){t.target.composing||e.$set(e.select_business,"business_name",t.target.value)}}})]),e.show_business_list?s("ul",{staticClass:"business-list"},e._l(e.business_list,function(t,n){return s("li",{on:{click:function(t){e.selectBusiness(n)}}},[e._v(e._s(t.business_name))])})):e._e()]):e._e(),2===e.type?s("div",{staticClass:"message form-item"},[s("label",{attrs:{for:"msg"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"msg",type:"text",name:"验证码",placeholder:"请输入验证码"},domProps:{value:e.password},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login()},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("div",{staticClass:"decode"},[s("Msg",{attrs:{phone:e.phone}})],1)]):e._e(),1===e.type?s("div",{staticClass:"message form-item"},[s("label",{attrs:{for:"msg2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"msg2",type:"password",name:"密码",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login()},input:function(t){t.target.composing||(e.password=t.target.value)}}})])]):e._e(),s("div",{staticClass:"sign-in form-item",on:{click:function(t){e.login()}}},[s("input",{attrs:{type:"button",value:"登录"}})]),s("div",{staticClass:"save-login"},[2===e.type?s("a",{staticClass:"fl",on:{click:e.changeType}},[e._v("使用密码登录")]):e._e(),1===e.type?s("a",{staticClass:"fl",on:{click:e.changeType}},[e._v("使用验证码登录")]):e._e(),s("a",{staticClass:"fr",attrs:{href:"/user/card-login.html"}},[e._v("\n                        使用兑换卡兑换\n                    ")])])])]),e.needPhone?s("div",{staticClass:"set-phone-mask"},[s("div",{staticClass:"phone-box login-box"},[e._m(1),s("div",{staticClass:"box-form"},[s("div",{staticClass:"user form-item"},[s("label",{attrs:{for:"user-phone"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkphone,expression:"checkphone"}],attrs:{id:"user-phone",type:"text",name:"用户名",placeholder:"请输入手机号码/用户名"},domProps:{value:e.checkphone},on:{input:function(t){t.target.composing||(e.checkphone=t.target.value)}}})])]),s("div",{staticClass:"message form-item"},[s("label",{attrs:{for:"sdmsg"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"sdmsg",type:"text",name:"验证码",placeholder:"请输入验证码"},domProps:{value:e.password},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.bindPhone()},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("div",{staticClass:"decode"},[s("Msg",{attrs:{phone:e.checkphone}})],1)]),s("div",{staticClass:"sign-in form-item",on:{click:function(t){e.bindPhone()}}},[s("input",{attrs:{type:"button",value:"绑定手机"}})])])])]):e._e(),e._m(2)])],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box-title"},[s("p",[e._v("欢迎登录福分通平台")]),s("p",{staticStyle:{"font-size":"16px","margin-top":"10px"}},[e._v("员工入口")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box-title"},[s("p",[e._v("绑定手机号码")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-info"},[s("p",{staticStyle:{"margin-bottom":"10px"}},[e._v("关于我们 | 福分通商城 | 增值通 | 维修通 | officemate办公伙伴")]),s("p",[e._v("版权所有 © CopyRight 2017 欧菲斯办公伙伴控股有限公司 渝ICP备18008342号-2")])])}],o=(s("f751"),s("96cf"),s("1da1")),r=(s("cadf"),s("551c"),s("097d"),s("251b")),u=s("6255"),c=s("675d"),l=s("bc3a"),p=s.n(l),d=s("4328"),m=s.n(d),h=s("1368"),f=s.n(h);f.a.polyfill();var b={metaInfo:{title:"福分通-用户登录",meta:[{name:"福分通",content:"专注企业员工福利"}]},data:function(){return{phone:"",checkphone:"",password:"",access:!1,isAccess:!1,timeOut:"获取验证码",disabled:!1,type:2,show_business_list:!1,business_list:[],select_business:{business_name:""},needPhone:!1,token:""}},components:{TopTitle:r["a"],FAlert:u["a"],Msg:c["a"]},mounted:function(){var e=this;this.$watch("phone",e.debounce(function(){e.getBusinessList()},800))},watch:{phone:{handler:function(e){var t=/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/;this.access=t.test(e)},deep:!0}},methods:{debounce:function(e,t){var s;return function(){s&&clearTimeout(s),s=setTimeout(function(){e()},t)}},changeType:function(){1===this.type?this.type=2:this.type=1,1===this.type?this.access=!0:this.access=!1,this.password=""},refused:function(){this.disabled?this.bus.$emit("notice","短信已发送"):this.bus.$emit("notice","账号不存在")},sendMsg:function(e){var t=this;!0!==this.access||this.disabled?this.bus.$emit("notice","请验证手机号码"):this.yum("api/verify/sendSms",{phone:e}).then(function(e){if(200!==e.data.status)return!1;t.MsgTimeOut(),t.bus.$emit("notice",e.data.msg)})},MsgTimeOut:function(){var e=60,t=this;t.disabled=!0;var s=setInterval(function(){e-=1,t.timeOut="请等待".concat(e,"秒"),0===e&&(clearInterval(s),t.disabled=!1,t.timeOut="获取验证码")},1e3)},login:function(){var e=this,t={loginName:this.phone,type:this.type,password:this.password};for(var s in t)if(!t[s])return this.bus.$emit("notice","请检查账号密码是否填写！"),!1;if(!this.select_business.business_code)return this.bus.$emit("notice","没有选择需要登录的子站！"),!1;t=m.a.stringify(t);var n="http://mapi.fufentong.com/".concat(this.select_business.business_code,"/api/member/login");p.a.post(n,t).then(function(t){200===t.data.status?(e.store.addStorage("FFT",t.data.data),e.token=t.data.data.token,e.isAccess=!1,e.password="",e.getCurrentBusiness()):e.bus.$emit("notice",t.data.msg)})},bindPhone:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={verify_code:this.password,mobile:this.checkphone,token:this.token},e.next=3,this.yum("api/member/bindPhone",t).then(function(e){if(200===e.data.status){var t=s.store.getStorage("FFT");t=Object.assign(t,{mobile:s.checkphone}),s.store.addStorage("FFT",t),location.assign("../index.html")}else s.bus.$emit("notice",e.data.msg)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getBusinessList:function(){var e=this;this.yum("api/member/checkMemberOfPhone",{mobile:this.phone}).then(function(t){200===t.data.status?(e.business_list=t.data.data,e.isAccess=!0,1===e.business_list.length&&(e.select_business=e.business_list[0])):(e.bus.$emit("notice",t.data.msg),e.isAccess=!1,e.business_list=[])})},getCurrentBusiness:function(){var e=this;p.a.post("http://mapi.fufentong.com/".concat(this.select_business.business_code,"/api/business/getCurrentBusiness")).then(function(t){200===t.data.status&&(e.store.addStorage("business_data",t.data.data),e.store.getStorage("FFT").mobile?(console.log("mobile"),location.assign("../index.html")):e.needPhone=!0)})},selectBusiness:function(e){this.show_business_list=!1,this.select_business=this.business_list[e]}}},v=b,g=(s("5a69"),s("2877")),_=Object(g["a"])(v,i,a,!1,null,"25b21fee",null);_.options.__file="app.vue";var y=_.exports,w=s("2570"),k=s.n(w),C=(s("5143"),s("8c7d")),x=s("6050"),P=s("4a46");n["default"].prototype.bus=P["a"],n["default"].prototype.yum=x["a"],n["default"].prototype.store=C["a"],n["default"].use(k.a),new n["default"]({el:"#app",render:function(e){return e(y)}})},9450:function(e,t,s){}});
//# sourceMappingURL=clogin.b27c29b3.js.map