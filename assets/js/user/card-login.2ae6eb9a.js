(function(t){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],p=0,l=[];p<s.length;p++)i=s[p],r[i]&&l.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(l.length)l.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={12:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=c;o.push([9,1,0]),a()})({5561:function(t,e,a){"use strict";var n=a("59b5"),r=a.n(n);r.a},"59b5":function(t,e,a){},9:function(t,e,a){t.exports=a("9a53")},"9a53":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("top-title",{attrs:{type:!0}}),a("f-alert"),a("div",{staticClass:"login-bg",style:{backgroundImage:"url('/static/user/bg2.jpg')"}},[a("div",{staticClass:"login-box"},[t._m(0),a("div",{staticClass:"box-form"},[a("div",{staticClass:"user  form-item"},[a("label",{attrs:{for:"card"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card_num,expression:"card_num"}],attrs:{id:"card",type:"text",name:"卡号",placeholder:"请输入兑换卡卡号"},domProps:{value:t.card_num},on:{input:function(e){e.target.composing||(t.card_num=e.target.value)}}})])]),a("div",{staticClass:"user  form-item"},[a("label",{attrs:{for:"card-pwd"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card_pwd,expression:"card_pwd"}],attrs:{id:"card-pwd",type:"text",name:"用户名",placeholder:"请输入兑换卡密码"},domProps:{value:t.card_pwd},on:{input:function(e){e.target.composing||(t.card_pwd=e.target.value)}}})])]),a("div",{staticClass:"user  form-item"},[a("label",{attrs:{for:"user-id"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{id:"user-id",type:"text",name:"用户名",placeholder:"请输入手机号码"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])]),a("div",{staticClass:"message form-item"},[a("label",{attrs:{for:"msg"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"msg",type:"text",name:"验证码",placeholder:"请输入验证码"},domProps:{value:t.password},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.login()},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"decode"},[a("verifycode",{attrs:{phone:t.phone}})],1)]),a("div",{staticClass:"sign-in form-item",on:{click:function(e){t.checkInput()}}},[a("input",{attrs:{type:"button",value:"登录"}})])])]),t._m(1)])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-title"},[a("p",[t._v("欢迎使用福分通平台")]),a("p",{staticStyle:{"font-size":"16px","margin-top":"10px"}},[t._v("卡券兑换")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-info"},[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("关于我们 | 福分通商城 | 增值通 | 维修通 | officemate办公伙伴")]),a("p",[t._v("版权所有 © CopyRight 2017 欧菲斯办公伙伴控股有限公司 渝ICP备18008342号-2")])])}],i=a("251b"),s=a("6255"),c=a("bc3a"),u=a.n(c),d=a("4328"),p=a.n(d),l=a("1368"),f=a.n(l),m=a("675d");f.a.polyfill();var h={metaInfo:{title:"福分通-用户登录",meta:[{name:"福分通",content:"专注企业员工福利"}]},data:function(){return{card_num:"",card_pwd:"",phone:"",password:"",site:"",access:!1,isAccess:!1}},components:{TopTitle:i["a"],FAlert:s["a"],verifycode:m["a"]},computed:{formCheck:function(){var t={card:this.card_num,pwd:this.card_pwd,phone:this.phone,verify:this.password};for(var e in t)if(!t[e])return!1;return!0}},watch:{phone:{handler:function(t){var e=/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/;this.access=e.test(t)},deep:!0}},methods:{checkInput:function(){this.formCheck?this.cardInfo():this.bus.$emit("notice","请检查是否填写完整")},cardInfo:function(){var t=this,e={card_num:this.card_num};this.yum("api/member/getCardInfo",e).then(function(e){200===e.data.status?(t.site=e.data.data.business_code,t.login()):t.bus.$emit("notice",e.data.msg)})},login:function(){var t=this,e={mobile:this.phone,verify_code:this.password};for(var a in e)if(!e[a])return this.bus.$emit("notice","请检查账号,验证码是否填写！"),!1;e=p.a.stringify(e);var n="http://mapi.fufentong.com/".concat(this.site,"/api/member/register");u.a.post(n,e).then(function(e){200===e.data.status?(t.store.addStorage("FFT",e.data.data),t.cardCharge()):t.bus.$emit("notice",e.data.msg)})},cardCharge:function(){var t=this,e={account:this.card_num,password:this.card_pwd,search:0,token:this.store.getStorage("FFT").token};e=p.a.stringify(e);var a="http://mapi.fufentong.com/".concat(this.site,"/api/member/cardCharge");u.a.post(a,e).then(function(e){200===e.data.status?(t.bus.$emit("notice","充值成功"),t.getCurrentBusiness()):t.bus.$emit("notice",e.data.msg)}).catch(function(e){t.bus.$emit("notice","网络错误")})},getCurrentBusiness:function(){var t=this;u.a.post("http://mapi.fufentong.com/".concat(this.site,"/api/business/getCurrentBusiness")).then(function(e){200===e.data.status&&(t.store.addStorage("business_data",e.data.data),setTimeout(function(){location.assign("../index.html")},1500))})}}},v=h,g=(a("5561"),a("2877")),b=Object(g["a"])(v,r,o,!1,null,"308d0ed9",null);b.options.__file="app.vue";var y=b.exports,_=a("2570"),w=a.n(_),C=(a("5143"),a("8c7d")),x=a("6050"),k=a("4a46");n["default"].prototype.bus=k["a"],n["default"].prototype.yum=x["a"],n["default"].prototype.store=C["a"],n["default"].use(w.a),new n["default"]({el:"#app",render:function(t){return t(y)}})}});
//# sourceMappingURL=card-login.2ae6eb9a.js.map